<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Serialization Unit Tests</title>
		<link rel="stylesheet" type="text/css" href="/htmlunit/unit_test.css" />
		<script type="text/javascript" runat="server" src="../../unit_test_lib.js"></script>
		
		<!-- null tests -->
		<script type="text/javascript" runat="server">
			function test_SerializeData_Null()
			{
				var data = null;
				var expected = "null";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- undefined tests -->
		<script type="text/javascript" runat="server">
			function test_SerializeData_Undefined()
			{
				var data = undefined;
				var expected = "null";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- Boolean tests -->
		<script type="text/javascript" runat="server">
			function test_SerializeData_TrueBoolean()
			{
				var data = true;
				var expected = "true";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_SerializeData_FalseBoolean()
			{
				var data = false;
				var expected = "false";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- Number tests -->
		<script type="text/javascript" runat="server">
			function test_Serialization_Integer()
			{
				var data = 10;
				var expected = "10";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_NegativeInteger()
			{
				var data = -10;
				var expected = "-10";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_Float()
			{
				var data = 10.5;
				var expected = "10.5";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_NegativeFloat()
			{
				var data = -10.5;
				var expected = "-10.5";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_ScientificNotation()
			{
				var data = 1.5e50;
				var expected = "1.5e+50";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_NegativeScientificiNotation()
			{
				var data = -1.1e50;
				var expected = "-1.1e+50";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_NegativeScientificNotation2()
			{
				var data = -1.5e-20
				var expected = "-1.5e-20"
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- Object tests -->
		<script type="text/javascript" runat="server">
			function test_Serialization_EmptyObject()
			{
				var data = {};
				var expected = "{}";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_ObjectOfBooleans()
			{
				var data = { a: true, b: false };
				var expected = '{"a":true,"b":false}';
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_Serialization_ObjectOfNumbers()
			{
				var data = { a: 10, b: -10, c: 10.5, d: -10.5, e: 1.05e50, f: -1.05e50, g: 1.05e-50, h: -1.05e-50 };
				var expected = '{"a":10,"b":-10,"c":10.5,"d":-10.5,"e":1.05e+50,"f":-1.05e+50,"g":1.05e-50,"h":-1.05e-50}';
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
						
			function test_Serialization_ObjectOfStrings()
			{
				var data = { a: "hello", b: "world" };
				var expected = '{"a":"hello","b":"world"}';
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- String tests -->
		<script type="text/javascript" runat="server">
			function test_SerializeData_String()
			{
				var data = "string";
				var expected = '"string"';
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		
		<!-- Array tests -->
		<script type="text/javascript" runat="server">
			function test_SerializeData_EmptyArray()
			{
				var data = [];
				var expected = "[]";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_SerializeData_ArrayOfBooleans()
			{
				var data = [true, false, false, true];
				var expected = "[true,false,false,true]";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_SerializeData_ArrayOfNumbers()
			{
				var data = [1, 2.1, .3, 1e-12];
				var expected = "[1,2.1,0.3,1e-12]";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_SerializeData_ArrayOfStrings()
			{
				var data = ["", "abc", "def"];
				var expected = "[\"\",\"abc\",\"def\"]";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
			
			function test_SerializeData_ArrayOfArrays()
			{
				var data = [
					[],
					[true, false, false, true],
					[1, 2.1, .3, 1e-12],
					["", "abc", "def"]
				];
				var expected = "[[],[true,false,false,true],[1,2.1,0.3,1e-12],[\"\",\"abc\",\"def\"]]";
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
		<script type="text/javascript" runat="server">
			function MyClass(a, b)
			{
				this.a = a;
				this.b = b;
			}
			
			function test_SerializeData_CustomObject()
			{
				var data = new MyClass("a", "b");
				var expected = '{"a":"a","b":"b"}';
				var result = Aptana.Serialization.toJSONString(data);
				
				$assertEquals(expected, result);
			}
		</script>
	</head>
	<body>
		<table id="output" cellpadding="2" cellspacing="0"></table>
		<script type="text/javascript" runat="server">
			$run_tests()
		</script>
	</body>
</html>
